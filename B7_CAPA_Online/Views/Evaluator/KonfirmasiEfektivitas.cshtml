
@{
    ViewBag.Title = "KonfirmasiEfektivitas";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<h2>KonfirmasiEfektivitas</h2>*@
<link href="~/Content/Scripts/plugins/datatables/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/Content/Scripts/plugins/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />

<div class="content-body">
    <div class="row page-titles mx-0">
        <div class="col p-md-0">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0)">Dashboard</a></li>
                <li class="breadcrumb-item active"><a href="javascript:void(0)">Konfirmasi Efektivitas CAPA</a></li>
            </ol>
        </div>
    </div>
    <!-- row -->

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Form CAPA</h4>
                        <form>
                            <div class="row">
                                <div class="form-group mb-2 col-sm-3">
                                    <label class="m-t-20">Tanggal</label>
                                    <input type="text" id="date-format" class="form-control form-control-sm" value="@DateTime.Today.ToShortDateString()" readonly>
                                </div>
                                <div class="form-group mb-2 col-sm-3">
                                    <label class="m-t-40">Requestor</label>
                                    <input class="form-control form-control-sm" type="text" id="input_Requestor" value="@Request.RequestContext.HttpContext.Session["FullName"]" readonly>
                                    <input class="form-control form-control-sm" type="text" id="input_Requestor_NIK" value="@Request.RequestContext.HttpContext.Session["NIK"]" hidden>
                                </div>
                                <div class="form-group mb-2 col-sm-3">
                                    <label class="m-t-20">Nomor CAPA</label>
                                    <input class="form-control form-control-sm" type="text" id="input_NoCAPA" value="@Request.QueryString["NoCAPA"]" readonly>

                                </div>
                                <div class="form-group mb-2 col-sm-3">
                                    <label class="m-t-40">Departemen</label>
                                    <input class="form-control form-control-sm" type="text" id="input_Departemen" value="@Request.RequestContext.HttpContext.Session["Departemen"]" readonly>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">View CAPA Page</h4>
                        <button class="btn btn-dark form-control col-sm-2" id="btn_ViewCAPA">View CAPA</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">View Bukti Page</h4>
                        <button class="btn btn-dark form-control col-sm-2" id="btn_ViewBukti">View Bukti</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <form>
                            <div class="row">
                                <div class="form-group mb-2 col-sm-12">
                                    <label class="m-t-40">
                                        Apakah terjadi penyimpangan serupa pada rentang waktu yang telah ditetapkan?
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <label class="m-t-20" style="margin-left:15px;"> <b>Ya</b> </label>
                                <input type='radio' id="Devi_Yes" name="Devi_Radio" value="Yes" style="margin-left:15px;" />
                                <label class="m-t-20" style="margin-left:15px;"> <b>Tidak</b> </label>
                                <input type='radio' id="Devi_No" name="Devi_Radio" value="no" style="margin-left:15px;" />
                            </div>
                            <div class="row" id="Deviation">
                                <table class="table table-striped table-bordered zero-configuration" id="Tbl_Devi">
                                    <thead>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <div class="form-group mb-2 col-sm-12">
                                    <label class="m-t-40">
                                        Apakah ada keluhan pelanggan serupa pada rentang waktu yang telah ditetapkan?
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <label class="m-t-20" style="margin-left:15px;"> <b>Ya</b> </label>
                                <input type='radio' id="CCC_Yes" name="CCC_Radio" value="Yes" style="margin-left:15px;" />
                                <label class="m-t-20" style="margin-left:15px;"> <b>Tidak</b> </label>
                                <input type='radio' id="CCC_No" name="CCC_Radio" value="No" style="margin-left:15px;" />
                            </div>
                            <div class="row">
                                <table class="table table-striped table-bordered zero-configuration" id="Tbl_CCC" hidden>
                                    <thead>
                                        <tr>
                                            <th>EmpID</th>
                                            <th>EmpName</th>
                                            <th>Plant</th>
                                            <th>Role</th>
                                            <th>Evaluator Utama</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <div class="form-group mb-2 col-sm-12">
                                    <label class="m-t-40">
                                        Apakah ada temuan serupa pada rentang waktu yang telah ditetapkan?
                                    </label>
                                </div>
                            </div>

                            <div class="row">
                                <label class="m-t-20" style="margin-left:15px;"> <b>Ya</b> </label>
                                <input type='radio' id="File_Yes" name="File_Radio" style="margin-left:15px;" value="Yes" />
                                <label class="m-t-20" style="margin-left:15px;"> <b>Tidak</b> </label>
                                <input type='radio' id="File_No" name="File_Radio" style="margin-left:15px;" value="No" />
                            </div>
                            <div class="row form-group-sm mb-2" id="Lampiran" hidden>
                                <div class="col-md-6">
                                    <label class="m-t-20">Lampiran Terkait</label>
                                    <div class="input-group mb-3">
                                        <div class="custom-file">
                                            <input id="TxtFileInput" type="file" name="LampiranTerkait" class="custom-file-input" multiple required">

                                            <label id="TxtLampiranCount" class="custom-file-label"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <input type="button" class="btn btn-primary" id="Submit" value="Submit" />
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title mb-3">Verifikasi Efektivitas</h4>
                        <div class="row form-group-sm">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="radio-inline mr-5">
                                        <input type="radio" name="Efektivitas" value="Efektif" id="isEfektif"> EFEKTIF
                                    </label>
                                    <label class="radio-inline mr-5">
                                        <input type="radio" name="Efektivitas" value="Tidak Efektif"> TIDAK EFEKTIF
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group-sm mb-3">
                            <div class="col-md-6">
                                <label class="m-t-20">Catatan<span style="color: red">*</span></label>
                                <textarea type="text" class="form-control" id="TxtCatatan" placeholder="Notes*"></textarea>
                            </div>
                        </div>
                        <div class="row form-group-sm mb-3" id="Div_StatusCARPAR" hidden>
                            <div class="col-md-6">
                                <label class="m-t-20">Status CAR-PAR</label>
                                <div class="rounded-button">
                                    <button type="button" class="btn mb-1 btn-rounded btn-primary disabled" id="StatusBadge" style="pointer-events: none">Closed</button>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group" style="float: left">
                            <div class="col-md-3">
                                <button type="button" id="btn_Submit" class="btn btn-primary mb-2">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- #/ container -->
    </div>
</div>

@*JQuery Library*@
@*<script src="../plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js"></script>
    <script src="../plugins/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>*@
<script src="~/Content/Scripts/plugins/sweetalert2/dist/sweetalert2.min.js" defer></script>
<script src="~/Content/Scripts/plugins/datatables/jquery.dataTables.min.js" defer></script>
<script src="~/Content/Scripts/plugins/jquery/jquery.min.js"></script>
<script src="https://unpkg.com/gojs/release/go-debug.js" defer></script>

<script>
    function DeviationTable() {
    }

    $(document).ready(function () {
        $('#btn_ViewBukti').click(function () {
            window.open('/Evaluator/ViewBukti');
        });

        $('#btn_Submit').click(function () {
            if ($('#TxtCatatan').val() != "" && $('input[name="Efektivitas"]:checked').val() != "") {
                // Closed CAPA or Closed with Initiate CAPA
            }

        });

        var countYes = 0;
        var countNo = 0;
        $('input[name="Efektivitas"]').click(function () {
            if ($('input[name="Efektivitas"]:checked').val() == 'Efektif') {
                $("#Div_StatusCARPAR").prop('hidden', false);
                $('#StatusBadge').removeClass(['btn-primary', 'btn-danger']).addClass('btn-primary');
                $('#StatusBadge').text("Closed");
                countNo = 0;
                countYes++;
            } else {
                $("#Div_StatusCARPAR").prop('hidden', false);
                $('#StatusBadge').removeClass(['btn-primary', 'btn-danger']).addClass('btn-danger');
                $('#StatusBadge').text("Closed with Initiate New CAPA");
                countYes = 0;
                countNo++;
            }
            if (countYes == 2 || countNo == 2) {
                countYes = 0;
                countNo = 0;
                $('input[name="Efektivitas"]').prop("checked", false);
                $("#Div_StatusCARPAR").prop('hidden', true);
                $('#StatusBadge').removeClass(['btn-primary', 'btn-danger']);
            }

        });
    });
</script>